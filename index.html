<!DOCTYPE html>
<html lang="en" class="load all">
<head>
  <meta charset="UTF-8">
  <title>CodePen - Recolor Skin, Lips, Hair... and Info</title>
  <base target="_blank"/>
<meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="./style.css">

</head>
<body>
<!-- partial:index.partial.html -->
<main>
  <p class="err" id="errorMessage"></p>
	<div class="w50">
    <input type="file" id="photo" name="file" accept="image/*" disabled class="w100" />
	  <input id="maxsize" class="w100" type="range" min="128" max="768" step="128" value="384" />
	</div>
  <fieldset id="default" class="w50">
    <legend>default color</legend>
    <label data-id="skin"><input type="color" data-id="skin" value="#add8e6" /></label>
		<label data-id="lips"><input type="color" data-id="lips" value="#ff00ff" /></label>
    <label data-id="hair"><input type="color" data-id="hair" value="#ffc000" /></label>
    <label data-id="eye"><input type="color" data-id="eye" value="#c080ff" /></label>
    <label data-id="iris"><input type="color" data-id="iris" value="#00ff00" /></label>
    <!--ex: different color on second face-->
    <label data-id="f1_skin"><input type="color" data-id="f1_skin" value="#ffc080" /></label>
		<label data-id="f1_lips"><input type="color" data-id="f1_lips" value="#ff4040" /></label>
		<label data-id="f1_hair"><input type="color" data-id="f1_hair" value="#ff40ff" /></label>
		<label data-id="bg" style="width:40%;"><input type="color" data-id="bg" value="#fff0c0" /></label>
  </fieldset>

  <section data-load="load OpenCV" class="w100">
    <div class="w50" id="edit">
			<label class="ui hide">&Cross;<input type="checkbox" id="abort" title="abort" /></label>
      <canvas id="roi" class='abs'></canvas>
			<canvas id="color" class='abs'></canvas>
		  <canvas id="depth" class='abs'></canvas>
			<canvas id="chromaImg"></canvas>
    </div>
		<div class="w50" id="view">
    <canvas id="chroma"></canvas>
		</div>
  </section>

<input id="col" type="range" max="2" value="0" />
<div id="mask" class="w100 scroll col0"></div>
<canvas id="eigen" class="w13" style="left:1em;background:transparent;"></canvas>
<div id="wheel" class="w50 aligncenter"></div>

	<details><pre>
  <li class="w100"><a href="//techcrunch.com/2019/06/18/youtubes-new-ar-beauty-try-on-lets-viewers-virtually-try-on-makeup-while-watching-video-reviews/">YouTube AR Beauty Try-On</a></li><li><a href="//app.lucidchart.com/documents#?folder_id=215746264&preview=215746264">lucidchart</a>
1. upload photo (orient via loadimage)
2. detect face(s) - set relative unit
 A. get foreground/background (grabcut)
 B. set roi for skin, lips, hair, eyes
  a. get kmeans palette / expand via inrange
  b. refine mask via grabcut
  c. colorize (!greenscreen)
3. composite color mask (?)
4. composite depth mask (PIXI)
5. bar chart (normal) and hsl color wheel (d3)
	</pre></details>
</main>
<!-- partial -->
  <script src='https://s3-us-west-2.amazonaws.com/s.cdpn.io/697675/utils.js'></script>
<script src='https://rawgit.com/blueimp/JavaScript-Load-Image/master/js/load-image.all.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/d3/5.16.0/d3.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/pixi.js/5.2.4/pixi.min.js'></script><script  src="./script.js"></script>

</body>
</html>
